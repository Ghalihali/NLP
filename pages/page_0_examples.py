import streamlit as st
import re

# ุฅุนุฏุงุฏ ุงูุตูุญุฉ
st.set_page_config(
    page_title="ุงุฎุชูุงุฑ ุชุบุฑูุฏุฉ ุฌุงูุฒุฉ",
    page_icon="๐ฌ",
    layout="centered"
)

# ๐ผ๏ธ ุนุฑุถ ุดุนุงุฑ ุงููุดุฑูุน
st.image("logo.png", width=120)

# ุนููุงู ุงูุตูุญุฉ ูุน ูุตู ุจุณูุท
st.markdown(
    """
    <h1 style='text-align: center; color: #4CAF50; margin-top:20px;'>๐ ุงุฎุชุฑ ุชุบุฑูุฏุฉ ุฌุงูุฒุฉ ูุฌุฑุจ ุงูุชุญููู!</h1>
    <p style='text-align: center; font-size:18px; color:#555;'>ุงุฎุชุฑ ูุตูุง ูุนุจุฑ ุจูุถูุญ ุนู ูุดุงุนุฑ ุฅูุฌุงุจูุฉ ุฃู ุณูุจูุฉ ุฃู ูุญุงูุฏุฉ ๐</p>
    """,
    unsafe_allow_html=True
)

# ูุงุฆูุฉ ุฃูุซูุฉ ุงูุชุบุฑูุฏุงุช
examples = [
    "ูู ุฃุชููู ูู ุฅููุงุก ูุดุฑูุนู ุงูุฌุงูุนู ุจุงูุดูู ุงููุทููุจุ ูุฃุดุนุฑ ุจุฅุญุจุงุท ุดุฏูุฏ ูุฎูุจุฉ ุฃูู.",
    "ุงูุฏุฑุงุณุฉ ุนู ุจุนุฏ ูุงูุช ูุชุนุจุฉ ุฌุฏูุง ูุฃุดุนุฑุชูู ุจุงูุฅุญุจุงุท ุงูุดุฏูุฏ ๐",
    "ุฃุดุนุฑ ุจูุฑุญุฉ ุบุงูุฑุฉ ุจุนุฏ ุญุถูุฑ ูุฑุดุฉ ุนูู ุนู ุงูุงุจุชูุงุฑ ุงูููู! ๐",
    "ูุงู ุงูุฌู ุงูููู ุฑุงุฆุนูุง ูู ุนุณูุฑุ ุงุณุชูุชุนุช ุจุทูุนุฉ ุจุฑูุฉ ูุง ูุซูู ููุง ๐ตโ๏ธ",
    "ุฃุดุนุฑ ุจุงูุญุฒู ุงูุดุฏูุฏ ุจุณุจุจ ุชุฃุฌูู ุงุฎุชุจุงุฑูุง ุงูููุงุฆู ุจุฏูู ุณุจุจ ๐",
    "ุงุณุชูุชุนุช ุจูู ูุญุธุฉ ุงูููู ุฎูุงู ุฒูุงุฑุชู ููุนุฑุถ ุงููุชุงุจ ุจุงูุฑูุงุถุ ููู ูุง ููุณู ๐โค๏ธ",
    "ุดุนุฑุช ุจุงูุฅุฑูุงู ุงูุดุฏูุฏ ุงูููู ุจุณุจุจ ุชุฃุฎุฑ ุงูุญุงููุฉ ูุงุถุทุฑุงุฑู ูููุดู ุทูููุงู ๐ก",
    "ุฃูุง ูุชุญูุณ ุฌุฏูุง ูุจุฏุก ุงูุชุฏุฑูุจ ุงูุชุนุงููู ุงูุฃุณุจูุน ุงููุงุฏู ุฅู ุดุงุก ุงููู ๐",
    "ุฃูุง ูุชูุชุฑ ุฌุฏูุง ุจุณุจุจ ุถุบุท ูุดุฑูุน ุงูุชุฎุฑุฌุ ุฏุนูุงุชูู ูู ๐คฒ",
    "ุงูุญูุฏ ููู ุฃูุฌุฒุช ุญูุธ ุฌุฒุก ุฌุฏูุฏ ูู ุงููุฑุขู ุงููุฑููุ ุดุนูุฑ ุฑุงุฆุน ูุง ููุตู ๐ธ๐"
]

# ูุงุฆูุฉ ูููุงุช ุฅูุฌุงุจูุฉ ูุฌุจ ุญุฐููุง ูู ุงููุตูุต ุงูุณูุจูุฉ
positive_words = ['ุงูุญูุฏ ููู', 'ุงุณุชูุชุนุช', 'ูุฑุญุฉ', 'ุฑุงุฆุน', 'ูุชุญูุณ', 'ุณุนูุฏ', 'ูุฌุงุญ', 'ูุฎูุฑ', 'ูุฑุญุช']

# ุฏุงูุฉ ูุญุฐู ุงููููุงุช ุงูุฅูุฌุงุจูุฉ ูู ุงููุต ุฅุฐุง ูุงู ุณูุจู
def clean_negative_text(text):
    # ุฅุฐุง ุงููุต ูุญุชูู ูููุงุช ุณูุจูุฉ ูุน ูููุงุช ุฅูุฌุงุจูุฉุ ูุญุฐู ุงูุฅูุฌุงุจูุฉ
    negative_keywords = ['ุญุฒูู', 'ุงุญุจุงุท', 'ุฒุนูุงู', 'ูุชุนุจ', 'ุถุงูู', 'ุชูุชุฑ', 'ุงุฑูุงู', 'ุถุบูุท', 'ุชุฃุฌูู', 'ุบุถุจ']
    if any(word in text for word in negative_keywords):
        for pos_word in positive_words:
            text = re.sub(r'\b{}\b'.format(re.escape(pos_word)), '', text)
    return text.strip()

# ุนุฑุถ ุงูุชุบุฑูุฏุงุช ูุงุฎุชูุงุฑูุง
with st.container():
    selected_example = st.radio(
        "๐ ุงุฎุชุฑ ุชุบุฑูุฏุฉ:",
        examples,
        index=0,
        help="ุงุฎุชุฑ ูุตูุง ุฌุงูุฒูุง ูุชุฌุฑุจุฉ ุงูุชุญููู."
    )

# ุฒุฑ ุงุณุชุฎุฏุงู ุงูุชุบุฑูุฏุฉ
st.write("")
if st.button("โ ุงุณุชุฎุฏุงู ูุฐู ุงูุชุบุฑูุฏุฉ ููุชุญููู", use_container_width=True):
    cleaned_text = clean_negative_text(selected_example)
    st.session_state['text'] = cleaned_text
    st.session_state['navigate'] = True
    st.success("โ ุชู ุงุฎุชูุงุฑ ุงููุต! ูุชู ุงูุขู ุงูุงูุชูุงู ุฅูู ุตูุญุฉ ุนุฑุถ ุงูุชุญููู...")

# ุฒุฑ ููุฑุฌูุน ููุตูุญุฉ ุงูุฑุฆูุณูุฉ
st.write("")
st.markdown(
    """
    <div style="text-align: center; margin-top:20px;">
        <a href="/app" target="_self">
            <button style='background-color:#4CAF50;color:white;padding:10px 20px;border:none;border-radius:8px;font-size:16px;'>โฌ๏ธ ูุชุงุจุฉ ุชุบุฑูุฏุฉ ุฌุฏูุฏุฉ</button>
        </a>
    </div>
    """,
    unsafe_allow_html=True
)

# ุงูุชููู ุงูุชููุงุฆู ุฅูู ุตูุญุฉ ุงูุชุญููู
if st.session_state.get('navigate', False):
    st.switch_page("pages/page_2_analysis.py")
